!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,f=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):f=-1,c.length&&p())}function p(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||u||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var f=a(u),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(s[f].references++,s[f].updater(d)):s.push({identifier:u,updater:v(d,t),references:1}),r.push(u)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,f=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,h=0;function v(e,t){var n,r,i;if(t.singleton){var o=h++;n=m||(m=c(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=c(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=l(e,t),c=0;c<n.length;c++){var u=a(n[c]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=o}}}},,,,function(e,t,n){(function(e,t){const r=n(6);n(7);const i={};console.debug("a3 start",{process:e}),function(e,n){const o=n.documentElement,s=n.getElementById("toggle"),a=n.getElementById("form"),l=n.getElementById("search"),c=n.getElementById("results"),u=n.getElementById("saved"),f=n.getElementById("play"),d=n.getElementById("goback"),p=e=>e?e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/`/g,"&#96;"):e,m=e=>new Function("o",`const e = ${p}; return \`${e}\`;`),h=e=>{const t=n.getElementById(e),r=t.innerHTML;return t.remove(),r};c._template=h("result-tmpl"),u._template=h("saved-tmpl"),f._srcTemplate=h("play-src-tmpl"),f._template=h("play-tmpl");const v={},g=e=>e.forEach(e=>v[e.id]=e);let y;const b=()=>{o.classList.add("search-loading"),setTimeout(()=>o.classList.remove("search-loading"),100)};f._initialHTML=f.innerHTML;const T=()=>{o.classList.remove("player-open")};let w;const L=e=>{const t=e.currentTarget._item;y!==t&&(e=>{w?w.src=m(f._srcTemplate)(e):(f.innerHTML=m(f._template)({...e,src:m(f._srcTemplate)(e)}),w=f.children[0]),y=e})(t),o.classList.add("player-open")};let E,_={};const j=()=>{const e=_.items.map(e=>e.id);return E=new RegExp("^("+e.join("|")+")$")},M=e=>E.test(e),A=()=>{const e=JSON.stringify(_.items);return _.str!==e&&(_.str=e,localStorage.setItem("saved",e),j(),!0)},C=()=>{const e=localStorage.getItem("saved");return _.str!==e&&(_.str=e,_.items=e&&JSON.parse(e)||[],j(),g(_.items),!0)},H=()=>{C()&&(B(u,_.items),x())},S=(e,t)=>{("boolean"==typeof t?t:M(e._item.id))?(e.classList.add("saved"),e.title=e.title.replace(/^Save/,"Unsave")):(e.classList.remove("saved"),e.title=e.title.replace(/^Unsave/,"Save"))},x=(e,t,r=n)=>{let i=[...r.getElementsByClassName("save-video")];e&&(i=i.filter(t=>t._item.id===e)),i.forEach(e=>S(e,t))},I=e=>{const t=e.currentTarget._item.id;let n=M(t);n?(e=>{const t=_.items.indexOf(v[e]);_.items.splice(t,1),A(),B(u,_.items)})(t):(e=>{_.items.unshift(v[e]),A(),B(u,_.items)})(t),x(t,!n)};c._initialHTML=c.innerHTML,u._initialHTML=u.innerHTML;const B=(e,t)=>{t&&t.length?(e.innerHTML=t.map(t=>m(e._template)(t)).join(""),[...e.children].forEach(e=>{const t=e.getAttribute("data-id"),n=e.getElementsByClassName("play-video")[0];n._item=v[t],n.addEventListener("click",L,!1);const r=e.getElementsByClassName("save-video")[0];r._item=v[t],(e=>{e.addEventListener("click",I,!1)})(r),S(r)})):e.innerHTML=e._initialHTML},k=new URL("https://www.googleapis.com/youtube/v3/search"),O=k.searchParams;let N,P;O.set("key","AIzaSyByKVyGVMgrBeyANVC-gXcYujHPCeb1sTc"),O.set("type","video"),O.set("part","snippet"),O.set("maxResults",25);const D=e=>{if(e.items){const t=e.items.map(e=>(e=>({id:e.id.videoId,title:e.snippet.title,channel:e.snippet.channelTitle,img:e.snippet.thumbnails.medium.url}))(e));g(t),c.scrollTop=0,B(c,t)}else e.error&&(console.error("search request failed:",e.error),c.innerHTML=`\n\t\t\t\t<li>Error: ${e.error.message}</li>\n\t\t\t\t<li><a href="javascript:window._useTestData();">Use test data</a></li>\n\t\t\t`);P=null,o.classList.remove("search-loading")};e._useTestData=()=>{if(i.data)return b(),D(i.data);console.log({__dirname:t});const e=r.join(t,"/activity3/testdata.json");return P&&P.abort(),P=new AbortController,o.classList.add("search-loading"),fetch(e).then(e=>e.json()).then(D).catch(e=>{console.error("testdata.json search request failed:",e),c.innerHTML=`\n\t\t\t\t<li>Error: ${e&&e.message||e}</li>\n\t\t\t`,P=null,o.classList.remove("search-loading")})};const U=e=>{e.preventDefault(),o.classList.toggle("saved-open")},q=e=>{var t;return e&&e.preventDefault(),o.classList.remove("saved-open"),o.classList.remove("player-open"),(t=l.value)==N?b():(N=t,t&&t.trim()?(P&&P.abort(),P=new AbortController,O.set("q",t),o.classList.add("search-loading"),"object"==typeof i.error?(console.warn("using testError instead of API call/response:",i.error),D(i.error)):"object"==typeof i.data?(console.warn("using testData instead of API call/response:",i.data),D(i.data)):fetch(k.href,{signal:P.signal}).then(e=>e.json()).then(D).catch(e=>{console.error("search request failed:",e),c.innerHTML=`\n\t\t\t\t\t<li>Error: ${e&&e.message||e}</li>\n\t\t\t\t\t<li><a href="javascript:window._useTestData();">Use test data</a></li>\n\t\t\t\t`,P=null,o.classList.remove("search-loading")})):(c.innerHTML=c._initialHTML,b())),!1};e.addEventListener("storage",H,!1),s.addEventListener("click",U,!1),d.addEventListener("click",T,!1),a.addEventListener("submit",q,!0),C(),B(u,_.items),console.debug("a3 init")}(window,document)}).call(this,n(0),"/")},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,l=0;l<s;l++)if(i[l]!==o[l]){a=l;break}var c=[];for(l=a;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(0))},function(e,t,n){var r=n(1),i=n(8);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){}]);